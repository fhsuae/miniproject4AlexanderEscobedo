{% extends "base.html" %}
{% load static %}

{% block content %}
<h1>{{ event.title }}</h1>

<!-- Display messages (errors, success, etc.) -->
{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
  {% endfor %}
{% endif %}

<p>{{ event.description }}</p>
<p><strong>Date & Time:</strong> {{ event.date_time }}</p>
<p><strong>Location:</strong> {{ event.location }}</p>
<p><strong>Capacity:</strong> {{ event.capacity }}</p>

{% if user.is_authenticated %}
  <h3>RSVP</h3>

  {% if user_rsvp %}
    <p>Your RSVP status: <strong>{{ user_rsvp.status }}</strong></p>
  {% endif %}

  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-success">Submit RSVP</button>
  </form>
{% else %}
  <p><a href="{% url 'login' %}">Log in</a> to RSVP for this event.</p>
{% endif %}
{% endblock %}
